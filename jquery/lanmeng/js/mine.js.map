{"version":3,"sources":["app.js","address.js","auth.js","comment.js","focus.js","grow.js","invoice.js","mine.js","order.js","phone.js","pwd.js","score.js","setting.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mine.js","sourcesContent":["/**\n * 不知道为什么浏览器刷新页面之后有时滚动条不会返回顶端\n */\n$('html, body').css('scrollTop', 0);\n\n(function () {\n  /*\n   * global 我的关注\n   */\n  var $focus = $('#j_sld_focus');\n  var $slder = $('#j_sld_focus ul');\n  var $item = $slder.children();\n  var min = $focus.attr('data-min');\n  var max = $item.length;\n  var crt = 0;\n\n  if (max <= min) {\n    $focus.find('.next, .prev').hide();\n    return;\n  }\n\n  // init\n  for(var i = 0; i < min; i++) {\n    $item.eq(i).clone().appendTo($slder);\n  }\n\n  // ctrl\n  $focus\n    .on('click', '.prev', function (evt) {\n      if ($slder.is(':animated')) return;\n      if (--crt < 0) {\n        crt = max - 1;\n        $slder.css({ left: - max / min * 100 + '%' });\n      }\n      $slder.animate({ left: '+=' + 100/min + '%' }, 400);\n    })\n    .on('click', '.next', function (evt) {\n      if ($slder.is(':animated')) return;\n      if (++crt >= max) {\n        crt = 0;\n        $slder.css({ left: 0 });\n      }\n      $slder.animate({ left: '-=' + 100/min + '%' }, 400);\n    });\n})();\n\n(function () {\n  /*\n   * header search\n   */\n  var smap = [\n    '/store/list?keyword=', //商品\n    '/innovate/example-list?keyword=', // 案例\n    '/bbs/search.php?mod=forum&searchsubmit=yes&srchtxt=', // 社区\n    '/infor/list/4?keyword=' //资讯\n  ];\n\n  var $stab = $('#j_uc_header .search-tab');\n  var $sipt = $('#j_uc_header .search-ipt');\n  var $sbtn = $('#j_uc_header .search-btn');\n\n  $stab.click(function () {\n    $(this).addClass('active').siblings('.search-tab').removeClass('active');\n  });\n\n  $('#j_uc_header .search form').submit(function () {\n    window.open( smap[$('#j_uc_header .search-tab.active').index()] + $sipt.val() );\n    return false;\n  })\n\n\n  /*\n   * 省市区\n   */\n  $(document)\n    .on('change', '.j_province', function (evt, a, b) {\n      var val = $(this).val();\n      var self = this;\n      if (val === '') {\n        $(self).siblings('.j_city').html('<option value=\"\">--选择市--</option>');\n        $(self).siblings('.j_district').html('<option value=\"\">--选择区--</option>');\n        return;\n      }\n      $.get('/user/api/city?id='+ val)\n        .success(function (res) {\n          var s = '<option value=\"\">--选择市--</option>';\n          $.each(res, function () {\n            s += '<option value=\"'+ this.id +'\">'+ this.name +'</option>';\n          });\n          $(self).siblings('.j_city').html(s).siblings('.j_district').html('<option value=\"\">--选择区--</option>');\n          a && $(self).siblings('.j_city').val(a);\n          b && $(self).siblings('.j_city').trigger('change', b);\n        });\n    })\n    .on('change', '.j_city', function (evt, data) {\n      var self = this;\n      var val = $(this).val();\n      if (val === '') {\n        $(self).siblings('.j_district').html('<option value=\"\">--选择区--</option>');\n        return;\n      }\n      $.get('/user/api/city?id='+ val)\n        .success(function (res) {\n          var s = '<option value=\"\">--选择区--</option>';\n          $.each(res, function () {\n            s += '<option value=\"'+ this.id +'\">'+ this.name +'</option>';\n          });\n          $(self).siblings('.j_district').html(s);\n          data && $(self).siblings('.j_district').val(data);\n        });\n    });\n\n\n  /**\n   * 添加ajax请求动画\n   */\n    function load(promise) {\n      if (!load.$load) load.$load = $('<div class=\"uc-load\">').appendTo('body');\n      var $load = load.$load;\n      var defer = $.Deferred();\n      $load.addClass('show');\n      promise\n        .done(function (res) {\n          defer.resolve(res);\n        })\n        .fail(function (res) {\n          defer.reject(res);\n        })\n        .always(function () {\n          $load.removeClass('show');\n        });\n      return defer.promise();\n    }\n\n  window.load = load;\n\n})();\n\n\n","(function () {\n    var $j_uc_address = $('#j_uc_address');\n    if (!$j_uc_address.length) return;\n    var $modal1 = $('#j_modal1');\n    var $modal2 = $('#j_modal2');\n    var $modal3 = $('#j_modal3');\n    $j_uc_address\n      // 新增联系地址\n      .on('click', '.uc-address-body .btn-new', function () {\n        var max = 5;\n        var crtLen = $j_uc_address.find('.alist .item').length;\n        if (crtLen >= 5) return alertTips('最多只能创建5个收货地址');\n        $modal1.find('form').get(0).reset();\n        $modal1.find('form [name=\"id\"]').val('');\n        $modal1.find('.modal-header').text('新增收货人');\n        $modal1.modal('show');\n      })\n      // 编辑联系地址\n      .on('click', '.uc-address-body .btn-edit', function () {\n        var $item = $(this).parents('.item');\n        $modal1.find('form').get(0).reset();\n        $modal1.find('.modal-header').text('编辑收货人')\n          .end().find('[name=\"id\"]').val($item.attr('data-id'))\n          .end().find('[name=\"consignee\"]').val($item.attr('data-consignee'))\n          .end().find('[name=\"province\"]').val($item.attr('data-province'))\n            .trigger('change', [$item.attr('data-city'), $item.attr('data-district')])\n          .end().find('[name=\"address\"]').val($item.attr('data-address'))\n          .end().find('[name=\"zipcode\"]').val($item.attr('data-zipcode'))\n          .end().find('[name=\"mobile\"]').val($item.attr('data-mobile'))\n          .end().find('[name=\"phone\"]').val($item.attr('data-phone'))\n          .end().modal('show');\n        $modal1.modal('show');\n      })\n      // 删除地址\n      .on('click', '.uc-address-body .btn-del', function () {\n        if (confirm('确定要删除该条地址吗？')) {\n          var id = $(this).parents('.item').attr('data-id');\n          var $item = $(this).parents('.item');\n          load($.post('/user/api/deladdress', {id: id})).done(function (res) {\n            if (res.status === 0) {\n              $item.remove();\n            } else {\n              alertTips(res.tips);\n            }\n          });\n        }\n      })\n      // 设置为默认地址\n      .on('click', '.uc-address-body .btn-dft', function () {\n        var $wrap = $(this).parents('.item');\n        if ($wrap.hasClass('active')) {\n          return;\n        } else if (confirm('要将该条地址设置为默认吗？')) {\n          load($.post('/user/api/setdefaultaddress', {id: $wrap.attr('data-id')}))\n            .done(function (res) {\n              if (res.status === 0) {\n                $wrap.addClass('active').siblings('.item').removeClass('active');\n              } else {\n                alertTips(res.tips);\n              }\n            });\n        }\n      });\n\n    // 添加修改验证\n    $.validator.addMethod(\n      \"regex\",\n      function(value, element, regexp) {\n          var re = new RegExp(regexp);\n          return this.optional(element) || re.test(value);\n      },\n      \"Please check your input.\"\n    );\n\n    $('form', $modal1).validate({\n      rules: {\n        consignee: {\n          required: true\n        },\n        province: {\n          required: true,\n          number: true\n        },\n        city: {\n          required: true,\n          number: true\n        },\n        district: {\n          required: true,\n          number: true\n        },\n        address: {\n          required: true\n        },\n        zipcode: {\n          required: true,\n          regex: '^\\\\d{6}'\n        },\n        mobile: {\n          required: true,\n          regex: '^13[\\\\d]{9}$|^14[5,7]{1}\\\\d{8}$|^15[^4]{1}\\\\d{8}$|^17[0,6,7,8]{1}\\\\d{8}$|^18[\\\\d]{9}$'//'^1\\\\d{10}$'\n        },\n        phone: {\n          regex: '^([0-9]{3,4}-)?[0-9]{7,8}$'\n        }\n      },\n      messages: {\n        consignee: '收货人不能为空',\n        province: '请选择省&ensp;',\n        city: '请选择市&ensp;',\n        district: '请选择区&ensp;',\n        address: '详细地址不能为空',\n        zipcode: {\n          required: '邮编不能为空',\n          regex: '请输入正确的邮编'\n        },\n        mobile: {\n          required: '手机号不能为空',\n          regex: '请输入正确的手机号'\n        },\n        phone: {\n          regex: '固话格式错误'\n        }\n      },\n      errorElement: 'span',\n      errorPlacement: function(err, elm) {\n        elm.parents('td').find('.help').append(err);\n      },\n      submitHandler: function(form) {\n        load($.post($(form).find('[name=\"id\"]').val() ? '/user/api/modifyaddress' : '/user/api/addaddress', $(form).serialize()))\n          .done(function (res) {\n            if (res.status === 0) window.location.reload();\n            else alertTips(res.tips);\n          });\n      }\n    });\n\n\n  })();\n","(function () {\n  var $ucAuth = $('#j_uc_auth');\n  if (!$ucAuth.length) return;\n\n  var $authform = $('#authform');\n\n  /**\n   * 切换认证类型\n   */\n  $authform.find('[name=\"groupType\"]').on('change', function () {\n    $authform.find('.type1, .type2, .type3').removeClass('show');\n    switch ($(this).val()) {\n      case '6':\n        $authform.find('.type1').addClass('show');\n        break;\n      case '7':\n        $authform.find('.type2').addClass('show');\n        break;\n      case '8':\n        $authform.find('.type3').addClass('show');\n        break;\n    }\n  });\n\n  /**\n   * 认证资料验证\n   */\n  $authform.validate({\n    groups: {\n      area: 'province city'\n    },\n    rules: {\n      groupType: {\n        required: true\n      },\n      bid: {\n        required: true\n      },\n      company: {\n        required: true\n      },\n      mobile: {\n        required: true\n      },\n      netcode: {\n        required: true\n      },\n      province: {\n        required: true\n      },\n      city: {\n        required: true\n      },\n      address: {\n        required: true\n      },\n      type: {\n        required: true\n      },\n      rank: {\n        required: true,\n        number: true\n      },\n      taxnum: {\n        required: true\n      },\n      bank: {\n        required: true\n      },\n      account: {\n        required: true\n      }\n    },\n    messages: {\n      groupType: {\n        required: '认证类型不能为空'\n      },\n      bid: {\n        required: '品牌不能为空'\n      },\n      company: {\n        required: '公司名称不能为空'\n      },\n      netcode: {\n        required: '网络代码不能为空'\n      },\n      mobile: {\n        required: '公司固定电话不能为空'\n      },\n      province: {\n        required: '请选择省'\n      },\n      city: {\n        required: '请选择市'\n      },\n      address: {\n        required: '详细地址不能空'\n      },\n      type: {\n        required: '请选择公司类别'\n      },\n      rank: {\n        required: '展厅级别不能为空',\n        number: '展厅级别为数字'\n      },\n      taxnum: {\n        required: '税务登记号不能为空'\n      },\n      bank: {\n        required: '开户行账号不能为空'\n      },\n      account: {\n        required: '开户账号不能为空'\n      }\n    },\n    errorElement: 'span',\n    errorPlacement: function(err, elm) {\n      elm.parents('.uc-auth1-cont').find('.help').append(err);\n    },\n    submitHandler: function(form) {\n      load($.post('/user/api/applyauth', $(form).serialize()))\n        .done(function (res) {\n          if (res.status === 0) {\n            window.location.reload();\n          } else {\n            alert(res.tips);\n          }\n        });\n    }\n  });\n\n\n  /**\n   * 上传扫描件\n   */\n  $('.uc-auth2 .upload-btn').each(function () {\n    var $btn = $(this);\n    var $progWrap = $btn.siblings('.upload-info').find('.prog');\n    var $progBar = $progWrap.find('.in');\n    var $pct = $progWrap.find('.pct');\n    var $msg = $btn.siblings('.upload-info').find('.msg');\n    var $preImg = $btn.siblings('.preview').find('.pre img');\n\n    new ss.SimpleUpload({\n      button: $btn,\n      url: '/image/upload',\n      name: 'file',\n      maxSize: 1024,\n      multipart: true,\n      disabledClass: 'disabled',\n      allowedExtensions: [\"jpg\", \"jpeg\", \"png\", \"gif\"],\n      responseType: 'json',\n      onExtError: function(filename, extension) {\n        $msg.text('文件格式不支持').show();\n      },\n      onSizeError: function(filename, fileSize) {\n        $msg.text('文件不能超过1M').show();\n      },\n      onSubmit: function() {\n        this.disable();\n        $btn.text('上传中');\n\n        $progWrap.show();\n        this.setProgressBar($progBar);\n        this.setPctBox($pct);\n        $btn.siblings('.upload-info').find('.msg').hide();\n      },\n      onError: function() {\n        this.enable();\n        $btn.text('选择文件');\n        $progWrap.hide();\n        $msg.text('请求失败，请重试').show();\n      },\n      onComplete: function(filename, response, uploadBtn, fileSize) {\n        this.enable();\n        $btn.text('选择文件');\n        $progWrap.hide();\n        if (response.status === 0) {\n          $preImg.attr('src', '/image/get/' + response.content.imageId);\n          $btn.attr('data-id', response.content.imageId);\n        } else {\n          $msg.text(response.tips).show();\n        }\n      }\n    });\n  });\n\n\n  /**\n   * 返回上一步\n   */\n  $('#btn2Prev').click(function () {\n    $('.uc-auth2').removeClass('active');\n    $('.uc-auth1').addClass('active');\n  });\n\n  /**\n   * step2 submit\n   */\n  $('#btn2Submit').click(function () {\n    var params = {};\n    var errMap = {\n      clicense: '营业执照',\n      ctax: '税务登记',\n      ocode: '组织机构代码'\n    };\n    var errMsg = null;\n    $('.uc-auth2 .upload-btn').each(function () {\n      var type = $(this).attr('data-type');\n      var id = $(this).attr('data-id');\n      params[type] = id;\n      if (!id && !errMsg) {\n        errMsg = '请上传' + errMap[type] + '图片';\n      }\n    });\n    if (errMsg) {\n      alert(errMsg);\n      return;\n    }\n    params['userInfoId'] = $('#userInfoId').val();\n    load($.post('/user/api/updateauth', params))\n      .done(function (res) {\n        if (res.status === 0) {\n          window.location.reload();\n        } else {\n          alert(res.tips);\n        }\n      })\n  })\n\n\n\n})();\n","(function () {\n  var $ucComment = $('#j_uc_comment');\n  if (!$ucComment.length) return;\n  $ucComment.on('click', '.cmt-title .toggle', function () {\n    var t = $(this).parents('.cmt-title').siblings('.cmt-cont');\n    var m = ['[收起]', '[查看]'];\n    if ($(this).text() == m[0]) {\n      $(this).text(m[1]);\n      // t.hide();\n      t.slideUp(200);\n    } else {\n      $(this).text(m[0]);\n      // t.show();\n      t.slideDown(200);\n    }\n  });\n})();\n\n(function () {\n  if (!$('#j_comment').length) return;\n  var $comment = $('#j_comment');\n  var $errBox = $('#j_comment .cmt-help');\n  $comment.validate({\n    rules: {\n      username: {\n        required: true\n      },\n      linktype: {\n        required: true\n      },\n      company: {\n        required: true\n      },\n      email: {\n        required: true,\n        email: true\n      },\n      content: {\n        required: true\n      }\n    },\n    messages: {\n      username: '姓名不能为空',\n      linktype: '联系方式不能为空',\n      company: '公司不能为空',\n      email: {\n        required: '电子邮箱不能为空',\n        email: '邮箱地址不正确'\n      },\n      content: '留言内容不能为空'\n    },\n    errorElement: 'div',\n    errorPlacement: function (err, elm) {\n      $errBox.append(err);\n    },\n    submitHandler: function(form) {\n      load($.post('/user/api/message', $(form).serialize()))\n        .done(function (res) {\n          if (res.status === 0) {\n            location.href='/mine/comment';\n          } else {\n            alert(res.tips);\n          }\n        });\n    }\n  });\n\n})();\n\n","(function () {\n  var $ucFocus = $('#j_uc_focus');\n  if (!$ucFocus.length) return;\n\n  // 取消关注－单个\n  $('.uc-focus-body .cancelBtn').on('click', function () {\n    var $ipt = $(this).parents('.item').find(':checkbox');\n    var params = {group: {}};\n    params['group'][$ipt.attr('data-type')] = [$ipt.val()];\n    if (confirm('确定要取消关注该条商品吗？')) {\n      cancelfollow(params);\n    }\n  });\n\n  // 取消关注－多个\n  $('.uc-focus-body .operate a').on('click', function () {\n    var params = {group: {}};\n    var data = $('.uc-focus-body .goods :checked').map(function () {\n      return {id: $(this).val(), type: $(this).attr('data-type')};\n    }).toArray();\n    if (!data.length) return alert('请先选中需要批量删除的商品');\n    $.each(data, function () {\n      if (!params['group'][this.type]) params['group'][this.type] = [];\n      params['group'][this.type].push(this.id);\n    });\n    if (confirm('确定要取消关注选中的商品吗？')) {\n      cancelfollow(params);\n    }\n  });\n\n  // 全选\n  $('.uc-focus-body .operate input').on('change', function () {\n    $('.uc-focus-body .goods :checkbox').prop('checked', $(this).is(':checked'));\n  });\n\n\n  function cancelfollow(params) {\n    load($.post('/user/api/cancelfollow', params)).done(function (res) {\n      // console.log(res);\n      if (res.status === 0) {\n        window.location.reload();\n      } else {\n        alert(res.tips);\n      }\n    });\n  }\n\n\n})();\n","(function () {\n  var $ucGrowRecord = $('#j_uc_grow_record');\n  if (!$ucGrowRecord.length) return;\n\n  var $startDate = $('#j_startDate');\n  var $endDate = $('#j_endDate');\n  $ucGrowRecord.find('.uc-score-body .filter .side .ubtn').click(function () {\n    var start = $startDate.val();\n    var end = $endDate.val();\n    if (start && end) {\n      window.location.href = $(this).attr('data-url').replace('{start}', start).replace('{end}', end);\n    } else if (!start && !end) {\n      window.location.href = '/mine/grow/record';\n    }\n  });\n\n})();\n","(function () {\n  var $ucInvoice = $('#j_uc_invoice');\n  if ( !$ucInvoice.length ) return;\n\n  var $form = $ucInvoice.find('form');\n  $form.validate({\n    groups: {\n      area: 'province city dist'\n    },\n    rules: {\n      company: {\n        required: true\n      },\n      phone: {\n        required: true,\n        pattern: '^([0-9]{3,4}-)?[0-9]{7,8}$'\n      },\n      taxnum: {\n        required: true\n      },\n      bank: {\n        required: true\n      },\n      address: {\n        required: true\n      },\n      account: {\n        required: true\n      },\n      username: {\n        required: true\n      },\n      mobile: {\n        required: true,\n        pattern: '^1[0-9]{10}$'\n      },\n      province: {\n        required: true\n      },\n      city: {\n        required: true\n      },\n      dist: {\n        required: true\n      },\n      adddress: {\n        required: true\n      }\n    },\n    messages: {\n      company: '公司地址不能为空',\n      phone: {\n        required: '手机号不能为空',\n        pattern: '手机号码格式错误'\n      },\n      taxnum: '纳税人识别码不能为空',\n      bank: '开户行不能为空',\n      address: '公司地址不能为空',\n      account: '银行账号不能为空',\n      username: '收票人不能为空',\n      mobile: {\n        required: '收票人手机不能为空',\n        pattern: '手机号码格式错误'\n      },\n      adddress: '详细地址不能为空',\n      province: '请选择省市区',\n      city: '请选择省市区',\n      dist: '请选择省市区',\n    },\n    errorElement: 'div',\n    errorPlacement: function (err, elm) {\n      $(elm).parents('td').find('.help').append(err);\n    },\n    submitHandler: function(form) {\n      var id = $(form).find('#id').val();\n      load($.post('/user/api/' + (id ? 'modifyinvoice' : 'invoice'), $(form).serialize()))\n        .done(function (res) {\n          if (res.status === 0) {\n            alertTips('保存成功');\n          } else {\n            alertTips(res.tips);\n          }\n        });\n    }\n  });\n\n\n})();\n","(function () {\n  var $ucUser = $('#j_uc_user');\n  if (!$ucUser.length) return;\n\n  /*\n    sign\n   */\n  $ucUser.find('.u3 .panel .sign').on('click', function (evt) {\n    var self = this;\n    if ( $(this).hasClass('disabled') ) {\n      return;\n    } else {\n      load($.get('user/api/sign')).done(function (res) {\n        if (res.status === 0) {\n          // $(self).addClass('disabled');\n          window.location.reload();\n        } else {\n          alert(res.tips);\n        }\n      });\n    }\n  });\n\n})();\n","/**\n * 我的订单\n */\n(function () {\n  var $ucOrder = $('#j_uc_order');\n  if (!$ucOrder.length) return;\n\n  // 删除订单\n  $ucOrder.on('click', '.uc-order-header .del', function () {\n    if (!confirm('确定要删除该条订单信息吗？')) return false;\n  });\n\n})();\n\n/**\n * 创库订单\n */\n(function () {\n  var $ucOrder = $('#j_uc_order2');\n  if (!$ucOrder.length) return;\n\n  $ucOrder.on('click', '.uc-order-header .del', function () {\n    var id = $(this).parents('tbody').attr('data-id');\n    $.post('/user/api/foo', {id: id}).success(function (res) {\n      alert(res.tips);\n      if (res.status === 0) {\n        window.location.reload();\n      }\n    });\n  });\n\n})();\n","(function () {\n  var $ucPhone = $('#j_uc_phone');\n  if (!$ucPhone.length) return;\n\n  var validator = $ucPhone.find('form').validate({\n    rules: {\n      mobile: {\n        required: true,\n        pattern: '^1\\\\d{10}$'\n      },\n      password: {\n        required: true,\n        rangelength: [6, 16]\n      },\n      code: {\n        required: true,\n      }\n    },\n    messages: {\n      mobile: {\n        required: '手机号不能为空',\n        pattern: '手机号码格式错误'\n      },\n      password: {\n        required: '密码不能为空',\n        rangelength: '密码长度介于6-16位之间'\n      },\n      code: '验证码不能为空'\n    },\n    errorElement: 'span',\n    errorPlacement: function(err, elm) {\n      elm.next().append(err);\n    },\n    submitHandler: function(form) {\n      load($.post('/user/api/modifymobile', $(form).serialize()))\n        .done(function (res) {\n          if (res.status === 0) {\n            $ucPhone.find('.uc-phone-body .w-step-item').addClass('on');\n            $(form).hide().siblings('.result').show();\n          } else {\n            // alert(res.tips);\n            alertTips(res.tips);\n          }\n        });\n    }\n  });\n\n\n  /**\n   * 获取验证码\n   */\n  var $captchaBtn = $('#captchaBtn');\n  var $captcha = $('#captcha');\n  var $mobile = $('#mobile');\n  $captchaBtn.on('click', function () {\n    var mobile = $mobile.val();\n    var captchaBtnTxt = $captchaBtn.html();\n\n    if ($(this).hasClass('disabled')) {\n      return false;\n    }\n\n    if (!$mobile.hasClass('valid')) {\n      validator.element($mobile);\n      $mobile.focus();\n    } else {\n      var defer = $.Deferred();\n      $captchaBtn.addClass('disabled');\n      $captchaBtn.siblings('.help').html('');\n\n      $.post('/user/api/validatecode', {mobile: mobile})\n        .done(function (res) {\n          if (res.status === 1) {\n            defer.resolve(res.tips);\n          }\n        })\n        .fail(function (err) {\n          defer.resolve('请求失败，请重试');\n        });\n\n      countDown(60)\n        .progress(function (time) {\n          defer.notify(time);\n        })\n        .always(function () {\n          defer.resolve();\n        });\n\n      $.when(defer)\n        .progress(function (time) {\n          $captchaBtn.html('重新获取('+time+')');\n        })\n        .done(function (err) {\n          if (err) {\n            $captchaBtn.siblings('.help').html(err);\n          }\n          $captchaBtn.removeClass('disabled').html(captchaBtnTxt);\n        });\n\n\n    }\n\n  });\n\n\n  /**\n   * 倒计时\n   * @return {[deferred]}\n   */\n  function countDown(time) {\n    var defer = $.Deferred();\n    if ($.isNumeric(time) && time <= 0) defer.reject();\n    defer.notify(time);\n    var timer = setInterval(function () {\n      defer.notify(--time);\n      if (time <= 0) {\n        clearInterval(timer);\n        defer.resolve(time);\n      }\n    }, 1000);\n    return defer;\n  }\n\n})();\n","(function () {\n  /*\n   * 修改密码\n   */\n  var $form = $('#j_uc_pwd form');\n  if (!$form.length) return;\n  var $submitBtn = $('#j_uc_pwd .submit');\n  $form.validate({\n    errorElement: 'span',\n    rules: {\n      oldPwd: {\n        required: true,\n        rangelength: [6, 16]\n      },\n      newPwd: {\n        required: true,\n        rangelength: [6, 16]\n      },\n      reNewPwd: {\n        required: true,\n        equalTo: '#newPwd'\n      },\n    },\n    messages: {\n      oldPwd: {\n        required: '原始密码不能为空',\n        rangelength: '密码长度介于6位至16位之间'\n      },\n      newPwd: {\n        required: '新密码不能为空',\n        rangelength: '密码长度介于6位至16位之间'\n      },\n      reNewPwd: {\n        required: '确认新密码不能为空',\n        equalTo: '两次密码必须一致'\n      }\n    },\n    errorPlacement: function(err, elm) {\n      elm.parents('.uc-pwd-row').find('.help').append(err);\n    },\n    submitHandler: function(form) {\n      load($.post('/user/api/modifypass', $(form).serialize()))\n        .done(function (res) {\n          if (res.status === 0) {\n            // location.reload();\n            window.location.href = '/login';\n          } else {\n            alert(res.tips);\n          }\n        });\n    }\n  });\n\n\n  /*\n   * password strength\n   */\n  function pwdStrength(pwd) {\n    var score = 0;\n    var uscore = 3/5/2;\n    var len = pwd.length;\n    var digit = pwd.match(/\\d/g);\n    var lower = pwd.match(/[a-z]/g);\n    var upper = pwd.match(/[A-Z]/g);\n    var special = pwd.match(/[!@#$%^&*?_~]/g);\n    digit = digit ? digit.length : 0;\n    lower = lower ? lower.length : 0;\n    upper = upper ? upper.length : 0;\n    special = special ? special.length : 0;\n    if (len > 8) {\n      score += uscore;\n    }\n    if (len > 12) {\n      score += uscore;\n    }\n    if (digit > 0) {\n      score += uscore;\n    }\n    if (digit > 2) {\n      score += uscore;\n    }\n    if (lower > 0) {\n      score += uscore;\n    }\n    if (lower > 2) {\n      score += uscore;\n    }\n    if (upper > 0) {\n      score += uscore;\n    }\n    if (upper > 2) {\n      score += uscore;\n    }\n    if (special > 0) {\n      score += uscore;\n    }\n    if (special > 2) {\n      score += uscore;\n    }\n\n    return Math.floor(score);\n  }\n\n  var $j_pwd_strength = $('#j_pwd_strength');\n  $('#newPwd').on('keyup', function () {\n    var map = ['lv-low', 'lv-mid', 'lv-high'];\n    var score = pwdStrength($(this).val());\n    // if ($(this).hasClass('valid')) {\n      $j_pwd_strength.removeClass(map.join(' ')).addClass(map[score]);\n    // } else {\n    //   $j_pwd_strength.removeClass(map.join(' '));\n    // }\n  });\n\n})();\n","\n(function () {\n  var $ucScore = $('#j_uc_score');\n  if (!$ucScore.length) return;\n\n  var $start = $('#j_startDate');\n  var $end = $('#j_endDate');\n  $('#search').on('submit', function () {\n    if (!$start.val() || !$end.val()) return alert('请选择筛选范围'),false;\n  });\n})();\n","/**\n * 用户设置\n */\n(function () {\n  /**\n   *\n   */\n  var $ucs = $('#j_uc_setting');\n  if (!$ucs.length) return;\n\n  var $year = $ucs.find('.year');\n  var $month = $ucs.find('.month');\n  var $day = $ucs.find('.day');\n  var dayCache = $day.val();\n\n  // brith\n  $day.on('change', function () {\n    dayCache = $(this).val();\n  });\n  $year.add($month).on('change', function () {\n    var year = $year.val();\n    var month = $month.val();\n    if (!year || !month) return;\n    var _days = new Date(year, month, 0).getDate();\n    var t = '<option value=\"\">日</option>';\n    $.each(new Array(_days), function (i) {\n      t += '<option value=\"'+(i+1)+'\">'+ (i+1) +'</option>';\n    });\n    $day.html(t);\n    if (dayCache && dayCache <= _days) {\n      $day.val(dayCache);\n    }\n  });\n\n  // padzore\n  function padzore(i) {\n    i = String(i);\n    return i.length < 2 ? '0' + i : i;\n  }\n\n  var $form_uif = $ucs.find('form.uif');\n  $form_uif.validate({\n    groups:{\n      brith: 'year month day'\n    },\n    rules: {\n      nickname: {\n        required: true,\n        rangelength: [2, 10]\n      },\n      year: {\n        required: true,\n        number: true\n      },\n      month: {\n        required: true,\n        number: true\n      },\n      day: {\n        required: true,\n        number: true\n      },\n      email: {\n        required: true,\n        email: true\n      },\n      qq: {\n        required: true,\n        pattern: '^\\\\d{5,10}$'\n      }\n    },\n    messages: {\n      nickname: {\n        required: '用户名不能为空',\n        rangelength: '用户名介于2-10位之间'\n      },\n      year: '请选择出生日期',\n      month: '请选择出生日期',\n      day: '请选择出生日期',\n      email: {\n        required: '邮箱地址不能为空',\n        email: '邮箱地址格式错误'\n      },\n      qq: 'QQ号码格式错误'\n    },\n    errorElement: 'span',\n    errorPlacement: function(err, elm) {\n      var name = $(elm).attr('name');\n      if (name === 'year' || name === 'month' || name === 'day') {\n        $(elm).parent().append(err);\n      } else {\n        $(elm).after(err);\n      }\n    },\n    submitHandler: function(form) {\n      var tmp = $(form).serializeArray();\n      if (form.year.value && form.month.value && form.day.value) {\n        tmp.push({\n          name: 'brith',\n          value: form.year.value + '-' + padzore(form.month.value) + '-' + padzore(form.day.value)\n        });\n      } else {\n        tmp.push({name: 'brith', value: ''});\n      }\n      // if (!tmp.email) tmp.email = $('#email').attr('placeholder');\n      load($.post('/user/api/modifyinfo', $.param(tmp)))\n        .done(function (res) {\n          if (res.status === 0) {\n            window.location.reload();\n          } else {\n            alertTips(res.tips);\n          }\n        });\n    }\n  });\n\n\n})();\n\n\n/**\n * 上传头像\n */\n(function () {\n\n  var $ucUcion = $('#j_uc_uicon');\n  if (!$ucUcion.length) return;\n\n\n  var $btn = $('#uploadBtn');\n  var $progWrap = $btn.siblings('.upload-info').find('.prog');\n  var $progBar = $progWrap.find('.in');\n  var $pct = $progWrap.find('.pct');\n  var $msg = $btn.siblings('.upload-info').find('.msg');\n  var $preImg = $btn.siblings('.preview').find('img');\n\n  new ss.SimpleUpload({\n    button: $btn,\n    url: '/image/upload',\n    name: 'file',\n    maxSize: 1024 * 2,\n    multipart: true,\n    disabledClass: 'disabled',\n    allowedExtensions: [\"jpg\", \"jpeg\", \"png\", \"gif\"],\n    responseType: 'json',\n    onExtError: function(filename, extension) {\n      $msg.text('文件格式不支持').show();\n    },\n    onSizeError: function(filename, fileSize) {\n      $msg.text('文件不能超过2M').show();\n    },\n    onSubmit: function() {\n      this.disable();\n\n      $progWrap.show();\n      this.setProgressBar($progBar);\n      this.setPctBox($pct);\n      $btn.siblings('.upload-info').find('.msg').hide();\n    },\n    onError: function() {\n      this.enable();\n      $progWrap.hide();\n      $msg.text('请求失败，请重试').show();\n    },\n    onComplete: function(filename, response, uploadBtn, fileSize) {\n      this.enable();\n      $progWrap.hide();\n      if (response.status === 0) {\n        $preImg.attr('src', '/image/get/' + response.content.imageId);\n        $btn.attr('data-id', response.content.imageId);\n      } else {\n        $msg.text(response.tips).show();\n      }\n    }\n  });\n\n  $('#submitBtn').click(function () {\n    var imageId = $btn.attr('data-id');\n    if (!imageId) return alertTips('请先上传图片'), false;\n    load($.post('/user/api/avatar', {imageId: imageId}))\n      .done(function (res) {\n        if (res.status === 0) {\n          window.location.reload();\n        } else {\n          alertTips(res.tips);\n        }\n      });\n    return false;\n  });\n\n})();\n"],"sourceRoot":"/source/"}